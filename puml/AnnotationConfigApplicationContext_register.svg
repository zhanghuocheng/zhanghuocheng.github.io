<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1385px" preserveAspectRatio="none" style="width:3260px;height:1385px;" version="1.1" viewBox="0 0 3260 1385" width="3260px" zoomAndPan="magnify"><defs><filter height="300%" id="f2rqxluui760t" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.0" dy="5.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f2rqxluui760t)" height="1029.8248" style="stroke: #000000; stroke-width: 2.5;" width="2686.875" x="560" y="280.1721"/><rect fill="#FFFFFF" filter="url(#f2rqxluui760t)" height="298.7939" style="stroke: #000000; stroke-width: 2.5;" width="1090.625" x="1097.5" y="522.0801"/><rect fill="#FFFFFF" filter="url(#f2rqxluui760t)" height="462.8729" style="stroke: #000000; stroke-width: 2.5;" width="1376.875" x="1857.5" y="838.374"/><rect fill="#FFFFFF" filter="url(#f2rqxluui760t)" height="364.7369" style="stroke: #000000; stroke-width: 2.5;" width="1351.875" x="1870" y="927.76"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="162.5" x2="162.5" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="466.25" x2="466.25" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="740" x2="740" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="986.25" x2="986.25" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="1205" x2="1205" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="1563.75" x2="1563.75" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="2021.25" x2="2021.25" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="2227.5" x2="2227.5" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="2456.25" x2="2456.25" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="2690" x2="2690" y1="51.4001" y2="1331.2469"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="3108.125" x2="3108.125" y1="51.4001" y2="1331.2469"/><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="300" x="10" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="18.75" y="32.5549">AnnotationConfigApplicationContext</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="300" x="10" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="18.75" y="1358.8019">AnnotationConfigApplicationContext</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="272.5" x="327.5" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="255" x="336.25" y="32.5549">AnnotatedBeanDefinitionReader</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="272.5" x="327.5" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="255" x="336.25" y="1358.8019">AnnotatedBeanDefinitionReader</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="241.25" x="617.5" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="223.75" x="626.25" y="32.5549">this.scopeMetadataResolver</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="241.25" x="617.5" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="223.75" x="626.25" y="1358.8019">this.scopeMetadataResolver</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="216.25" x="876.25" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="198.75" x="885" y="32.5549">this.beanNameGenerator</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="216.25" x="876.25" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="198.75" x="885" y="1358.8019">this.beanNameGenerator</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="186.25" x="1110" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="168.75" x="1118.75" y="32.5549">AnnotationConfigUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="186.25" x="1110" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="168.75" x="1118.75" y="1358.8019">AnnotationConfigUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="181.25" x="1471.25" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="163.75" x="1480" y="32.5549">ScopedProxyCreator</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="181.25" x="1471.25" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="163.75" x="1480" y="1358.8019">ScopedProxyCreator</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="153.75" x="1942.5" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="136.25" x="1951.25" y="32.5549">ScopedProxyUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="153.75" x="1942.5" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="136.25" x="1951.25" y="1358.8019">ScopedProxyUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="223.75" x="2113.75" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="206.25" x="2122.5" y="32.5549">BeanDefinitionReaderUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="223.75" x="2113.75" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="206.25" x="2122.5" y="1358.8019">BeanDefinitionReaderUtils</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="197.5" x="2355" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="180" x="2363.75" y="32.5549">BeanDefinitionRegistry</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="197.5" x="2355" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="180" x="2363.75" y="1358.8019">BeanDefinitionRegistry</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="236.25" x="2570" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="218.75" x="2578.75" y="32.5549">DefaultListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="236.25" x="2570" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="218.75" x="2578.75" y="1358.8019">DefaultListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="197.5" x="3006.875" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="180" x="3015.625" y="32.5549">AbstractBeanDefinition</text><rect fill="#FEFECE" filter="url(#f2rqxluui760t)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="197.5" x="3006.875" y="1329.9969"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="180" x="3015.625" y="1358.8019">AbstractBeanDefinition</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="162.5" x2="215" y1="93.5931" y2="93.5931"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="215" x2="215" y1="93.5931" y2="109.8431"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="163.75" x2="215" y1="109.8431" y2="109.8431"/><polygon fill="#A80036" points="176.25,104.8431,163.75,109.8431,176.25,114.8431,171.25,109.8431" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="171.25" y="87.5226">register(BeanClass)</text><polygon fill="#A80036" points="451.25,144.5361,463.75,149.5361,451.25,154.5361,456.25,149.5361" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="162.5" x2="458.75" y1="149.5361" y2="149.5361"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="171.25" y="143.4656">register(BeanClass)</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="466.25" x2="518.75" y1="189.2291" y2="189.2291"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="518.75" x2="518.75" y1="189.2291" y2="205.4791"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="467.5" x2="518.75" y1="205.4791" y2="205.4791"/><polygon fill="#A80036" points="480,200.4791,467.5,205.4791,480,210.4791,475,205.4791" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="238.75" x="475" y="183.1586">registerBean(java.lang.Class&lt;?&gt;)</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="466.25" x2="518.75" y1="245.1721" y2="245.1721"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="518.75" x2="518.75" y1="245.1721" y2="261.4221"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="467.5" x2="518.75" y1="261.4221" y2="261.4221"/><polygon fill="#A80036" points="480,256.4221,467.5,261.4221,480,266.4221,475,261.4221" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="115" x="475" y="239.1016">doRegisterBean</text><path d="M560,280.1721 L742.5,280.1721 L742.5,291.4221 L730,303.9221 L560,303.9221 L560,280.1721 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="1029.8248" style="stroke: #000000; stroke-width: 2.5;" width="2686.875" x="560" y="280.1721"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126.25" x="578.75" y="300.0446">doRegisterBean</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="740.625" x2="793.125" y1="334.5581" y2="334.5581"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="793.125" x2="793.125" y1="334.5581" y2="350.8081"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="741.875" x2="793.125" y1="350.8081" y2="350.8081"/><polygon fill="#A80036" points="754.375,345.8081,741.875,350.8081,754.375,355.8081,749.375,350.8081" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="163.75" x="749.375" y="328.4875">resolveScopeMetadata</text><path d="M572.5,312.9901 L572.5,346.7401 L728.75,346.7401 L728.75,325.4901 L716.25,312.9901 L572.5,312.9901 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M716.25,312.9901 L716.25,325.4901 L728.75,325.4901 L716.25,312.9901 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="130" x="580" y="337.8625">解析作用域元信息</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="986.875" x2="1039.375" y1="390.5011" y2="390.5011"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1039.375" x2="1039.375" y1="390.5011" y2="406.7511"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="988.125" x2="1039.375" y1="406.7511" y2="406.7511"/><polygon fill="#A80036" points="1000.625,401.7511,988.125,406.7511,1000.625,411.7511,995.625,406.7511" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="995.625" y="384.4305">generateBeanName</text><path d="M833.75,368.9331 L833.75,402.6831 L975,402.6831 L975,381.4331 L962.5,368.9331 L833.75,368.9331 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M962.5,368.9331 L962.5,381.4331 L975,381.4331 L962.5,368.9331 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="115" x="841.25" y="393.8055">生成 beanName</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="1205.625" x2="1258.125" y1="466.7621" y2="466.7621"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1258.125" x2="1258.125" y1="466.7621" y2="483.0121"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1206.875" x2="1258.125" y1="483.0121" y2="483.0121"/><polygon fill="#A80036" points="1219.375,478.0121,1206.875,483.0121,1219.375,488.0121,1214.375,483.0121" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="316.25" x="1214.375" y="460.6915">processCommonDefinitionAnnotations(abd);</text><path d="M850,423.0011 L850,501.7511 L1193.75,501.7511 L1193.75,435.5011 L1181.25,423.0011 L850,423.0011 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M1181.25,423.0011 L1181.25,435.5011 L1193.75,435.5011 L1181.25,423.0011 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="857.5" y="447.8735">生成 bean 的元信息</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="312.5" x="862.5" y="470.0665">`@Lazy` 、 `@Primary` 、  `@DependsOn`</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="197.5" x="862.5" y="492.2595">`@Role`  、 `@Description`</text><path d="M1097.5,522.0801 L1462.5,522.0801 L1462.5,533.3301 L1450,545.8301 L1097.5,545.8301 L1097.5,522.0801 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="298.7939" style="stroke: #000000; stroke-width: 2.5;" width="1090.625" x="1097.5" y="522.0801"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="308.75" x="1116.25" y="541.9525">通过这个方法已经加载配置文件的各种属性</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="1205.625" x2="1258.125" y1="598.6591" y2="598.6591"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1258.125" x2="1258.125" y1="598.6591" y2="614.9091"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1206.875" x2="1258.125" y1="614.9091" y2="614.9091"/><polygon fill="#A80036" points="1219.375,609.9091,1206.875,614.9091,1219.375,619.9091,1214.375,614.9091" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="176.25" x="1214.375" y="570.3955">applyScopedProxyMode</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="341.25" x="1214.375" y="592.5885">(scopeMetadata, definitionHolder, this.registry);</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="1564.375" x2="1616.875" y1="676.795" y2="676.795"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1616.875" x2="1616.875" y1="676.795" y2="693.045"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1565.625" x2="1616.875" y1="693.045" y2="693.045"/><polygon fill="#A80036" points="1578.125,688.045,1565.625,693.045,1578.125,698.045,1573.125,693.045" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="1573.125" y="648.5315">createScopedProxy</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="278.75" x="1573.125" y="670.7245">(definition, registry, proxyTargetClass);</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="2021.875" x2="2074.375" y1="732.738" y2="732.738"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2074.375" x2="2074.375" y1="732.738" y2="748.988"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2023.125" x2="2074.375" y1="748.988" y2="748.988"/><polygon fill="#A80036" points="2035.625,743.988,2023.125,748.988,2035.625,753.988,2030.625,748.988" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="142.5" x="2030.625" y="726.6675">createScopedProxy</text><polygon fill="#A80036" points="1578.125,805.874,1565.625,810.874,1578.125,815.874,1573.125,810.874" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1570.625" x2="2020.625" y1="810.874" y2="810.874"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="230" x="1585.625" y="782.6105">return new BeanDefinitionHolder</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="427.5" x="1585.625" y="804.8035">(proxyDefinition, originalBeanName, definition.getAliases());</text><path d="M1857.5,838.374 L2062.5,838.374 L2062.5,849.624 L2050,862.124 L1857.5,862.124 L1857.5,838.374 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="462.8729" style="stroke: #000000; stroke-width: 2.5;" width="1376.875" x="1857.5" y="838.374"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148.75" x="1876.25" y="858.2465">注册 Bean 的元信息</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="2228.125" x2="2280.625" y1="892.76" y2="892.76"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2280.625" x2="2280.625" y1="892.76" y2="909.01"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2229.375" x2="2280.625" y1="909.01" y2="909.01"/><polygon fill="#A80036" points="2241.875,904.01,2229.375,909.01,2241.875,914.01,2236.875,909.01" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="2236.875" y="886.6895">registerBeanDefinition</text><path d="M1870,927.76 L2103.75,927.76 L2103.75,939.01 L2091.25,951.51 L1870,951.51 L1870,927.76 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="364.7369" style="stroke: #000000; stroke-width: 2.5;" width="1351.875" x="1870" y="927.76"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177.5" x="1888.75" y="947.6324">registerBeanDefinition</text><polygon fill="#A80036" points="2441.25,977.146,2453.75,982.146,2441.25,987.146,2446.25,982.146" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2228.125" x2="2448.75" y1="982.146" y2="982.146"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="2236.875" y="976.0754">registerBeanDefinition</text><polygon fill="#A80036" points="2675.625,1023.089,2688.125,1028.089,2675.625,1033.089,2680.625,1028.089" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2456.25" x2="2683.125" y1="1028.089" y2="1028.089"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="157.5" x="2465" y="1022.0184">registerBeanDefinition</text><path d="M2280,998.396 L2280,1032.146 L2445,1032.146 L2445,1010.896 L2432.5,998.396 L2280,998.396 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M2432.5,998.396 L2432.5,1010.896 L2445,1010.896 L2432.5,998.396 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="138.75" x="2287.5" y="1023.2684">注册 beanDefinition</text><polygon fill="#A80036" points="3093.125,1091.225,3105.625,1096.225,3093.125,1101.225,3098.125,1096.225" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2690.625" x2="3100.625" y1="1096.225" y2="1096.225"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="180" x="2699.375" y="1067.9614">((AbstractBeanDefinition)</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="180" x="2699.375" y="1090.1544">beanDefinition).validate();</text><path d="M2441.25,1055.4355 L2441.25,1089.1855 L2678.75,1089.1855 L2678.75,1067.9355 L2666.25,1055.4355 L2441.25,1055.4355 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M2666.25,1055.4355 L2666.25,1067.9355 L2678.75,1067.9355 L2666.25,1055.4355 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="211.25" x="2448.75" y="1080.3079">先进行 BeanDefinition 的验证</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="2690.625" x2="2743.125" y1="1135.918" y2="1135.918"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2743.125" x2="2743.125" y1="1135.918" y2="1152.168"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2691.875" x2="2743.125" y1="1152.168" y2="1152.168"/><polygon fill="#A80036" points="2704.375,1147.168,2691.875,1152.168,2704.375,1157.168,2699.375,1152.168" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="250" x="2699.375" y="1129.8474">!isAllowBeanDefinitionOverriding() :</text><path d="M2441.25,1114.35 L2441.25,1148.1 L2678.75,1148.1 L2678.75,1126.85 L2666.25,1114.35 L2441.25,1114.35 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M2666.25,1114.35 L2666.25,1126.85 L2678.75,1126.85 L2666.25,1114.35 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="211.25" x="2448.75" y="1139.2224">假如不允许覆盖，抛出来错误</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="2690.625" x2="2743.125" y1="1214.054" y2="1214.054"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2743.125" x2="2743.125" y1="1214.054" y2="1230.304"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2691.875" x2="2743.125" y1="1230.304" y2="1230.304"/><polygon fill="#A80036" points="2704.375,1225.304,2691.875,1230.304,2704.375,1235.304,2699.375,1230.304" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="395" x="2699.375" y="1185.7904">this.beanDefinitionMap.put(beanName, beanDefinition);</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="341.25" x="2704.375" y="1207.9834">this.beanDefinitionNames = updatedDefinitions;</text><path d="M2287.5,1181.3895 L2287.5,1215.1395 L2678.75,1215.1395 L2678.75,1193.8895 L2666.25,1181.3895 L2287.5,1181.3895 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M2666.25,1181.3895 L2666.25,1193.8895 L2678.75,1193.8895 L2666.25,1181.3895 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="365" x="2295" y="1206.2619">更新 beanDefinitionMap 还有 beanDefinitionNames</text><polygon fill="#A80036" points="2441.25,1271.2469,2453.75,1276.2469,2441.25,1281.2469,2446.25,1276.2469" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="2228.125" x2="2448.75" y1="1276.2469" y2="1276.2469"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="95" x="2236.875" y="1270.1764">registerAlias:</text><path d="M1882.5,1246.554 L1882.5,1280.304 L2216.25,1280.304 L2216.25,1259.054 L2203.75,1246.554 L1882.5,1246.554 " fill="#FBFB77" filter="url(#f2rqxluui760t)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M2203.75,1246.554 L2203.75,1259.054 L2216.25,1259.054 L2203.75,1246.554 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="307.5" x="1890" y="1271.4264">注册别名（就是当成一个 另外一个 Bean）</text><!--MD5=[9937b975a690d61c549c47d255f06105]
@startuml
AnnotationConfigApplicationContext -> AnnotationConfigApplicationContext: register(BeanClass)
AnnotationConfigApplicationContext -> AnnotatedBeanDefinitionReader: register(BeanClass)
AnnotatedBeanDefinitionReader -> AnnotatedBeanDefinitionReader: registerBean(java.lang.Class<?>)
AnnotatedBeanDefinitionReader -> AnnotatedBeanDefinitionReader: doRegisterBean

group doRegisterBean

this.scopeMetadataResolver -> this.scopeMetadataResolver: resolveScopeMetadata
note left: 解析作用域元信息
this.beanNameGenerator ->  this.beanNameGenerator : generateBeanName
note left: 生成 beanName
AnnotationConfigUtils -> AnnotationConfigUtils : processCommonDefinitionAnnotations(abd);
note left: 生成 bean 的元信息 \n `@Lazy` 、 `@Primary` 、  `@DependsOn`\n `@Role`  、 `@Description`

group 通过这个方法已经加载配置文件的各种属性
AnnotationConfigUtils -> AnnotationConfigUtils : applyScopedProxyMode\n(scopeMetadata, definitionHolder, this.registry);
ScopedProxyCreator -> ScopedProxyCreator: createScopedProxy\n(definition, registry, proxyTargetClass);
ScopedProxyUtils -> ScopedProxyUtils : createScopedProxy
ScopedProxyUtils -> ScopedProxyCreator :  return new BeanDefinitionHolder\n(proxyDefinition, originalBeanName, definition.getAliases());
end


group 注册 Bean 的元信息

BeanDefinitionReaderUtils -> BeanDefinitionReaderUtils: registerBeanDefinition

group registerBeanDefinition
BeanDefinitionReaderUtils -> BeanDefinitionRegistry: registerBeanDefinition

BeanDefinitionRegistry-> DefaultListableBeanFactory: registerBeanDefinition
note left: 注册 beanDefinition

DefaultListableBeanFactory -> AbstractBeanDefinition :  ((AbstractBeanDefinition)\nbeanDefinition).validate();
note left: 先进行 BeanDefinition 的验证

DefaultListableBeanFactory -> DefaultListableBeanFactory: !isAllowBeanDefinitionOverriding() :
note left: 假如不允许覆盖，抛出来错误

DefaultListableBeanFactory -> DefaultListableBeanFactory: this.beanDefinitionMap.put(beanName, beanDefinition); \n this.beanDefinitionNames = updatedDefinitions;
note left: 更新 beanDefinitionMap 还有 beanDefinitionNames






BeanDefinitionReaderUtils -> BeanDefinitionRegistry : registerAlias:
note left: 注册别名（就是当成一个 另外一个 Bean）
end

end

end
@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 CST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b520.11
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>