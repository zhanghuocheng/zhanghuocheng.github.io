<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1797.5px" preserveAspectRatio="none" style="width:2253px;height:1797px;" version="1.1" viewBox="0 0 2253 1797" width="2253.75px" zoomAndPan="magnify"><defs><filter height="300%" id="f17o6wqsk5zjw5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.0" dy="5.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f17o6wqsk5zjw5)" height="1554.5618" style="stroke: #000000; stroke-width: 2.5;" width="2225" x="15" y="168.2861"/><rect fill="#FFFFFF" filter="url(#f17o6wqsk5zjw5)" height="341.2939" style="stroke: #000000; stroke-width: 2.5;" width="535" x="230" y="332.0581"/><rect fill="#FFFFFF" filter="url(#f17o6wqsk5zjw5)" height="160.022" style="stroke: #000000; stroke-width: 2.5;" width="1000" x="391.25" y="802.738"/><rect fill="#FFFFFF" filter="url(#f17o6wqsk5zjw5)" height="342.2369" style="stroke: #000000; stroke-width: 2.5;" width="2170" x="57.5" y="1315.918"/><rect fill="#FFFFFF" filter="url(#f17o6wqsk5zjw5)" height="173.465" style="stroke: #000000; stroke-width: 2.5;" width="936.25" x="1278.75" y="1475.9399"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="238.75" x2="238.75" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="520" x2="520" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="896.25" x2="896.25" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="1220" x2="1220" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="1533.75" x2="1533.75" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="1810" x2="1810" y1="51.4001" y2="1744.0979"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 5.0,5.0;" x1="2072.5" x2="2072.5" y1="51.4001" y2="1744.0979"/><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="300" x="86.25" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="95" y="32.5549">AnnotationConfigApplicationContext</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="300" x="86.25" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="282.5" x="95" y="1771.6528">AnnotationConfigApplicationContext</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="228.75" x="403.75" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="211.25" x="412.5" y="32.5549">AbstractApplicationContext</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="228.75" x="403.75" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="211.25" x="412.5" y="1771.6528">AbstractApplicationContext</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="298.75" x="745" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="281.25" x="753.75" y="32.5549">PostProcessorRegistrationDelegate</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="298.75" x="745" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="281.25" x="753.75" y="1771.6528">PostProcessorRegistrationDelegate</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="312.5" x="1061.25" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="295" x="1070" y="32.5549">BeanDefinitionRegistryPostProcessor</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="312.5" x="1061.25" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="295" x="1070" y="1771.6528">BeanDefinitionRegistryPostProcessor</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="281.25" x="1391.25" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="263.75" x="1400" y="32.5549">ConfigurableListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="281.25" x="1391.25" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="263.75" x="1400" y="1771.6528">ConfigurableListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="236.25" x="1690" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="218.75" x="1698.75" y="32.5549">DefaultListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="236.25" x="1690" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="218.75" x="1698.75" y="1771.6528">DefaultListableBeanFactory</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="253.75" x="1943.75" y="3.75"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="236.25" x="1952.5" y="32.5549">DefaultSingletonBeanRegistry</text><rect fill="#FEFECE" filter="url(#f17o6wqsk5zjw5)" height="41.4001" style="stroke: #A80036; stroke-width: 1.875;" width="253.75" x="1943.75" y="1742.8479"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacingAndGlyphs" textLength="236.25" x="1952.5" y="1771.6528">DefaultSingletonBeanRegistry</text><polygon fill="#A80036" points="505.625,88.5931,518.125,93.5931,505.625,98.5931,510.625,93.5931" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="238.75" x2="513.125" y1="93.5931" y2="93.5931"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="13.75" x="247.5" y="87.5226">1.</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="48.75" x="266.25" y="87.5226">refresh</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="133.2861" y2="133.2861"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="133.2861" y2="149.5361"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="149.5361" y2="149.5361"/><polygon fill="#A80036" points="534.375,144.5361,521.875,149.5361,534.375,154.5361,529.375,149.5361" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="13.75" x="529.375" y="127.2156">1.</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="48.75" x="548.125" y="127.2156">refresh</text><path d="M15,168.2861 L126.25,168.2861 L126.25,179.5361 L113.75,192.0361 L15,192.0361 L15,168.2861 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="1554.5618" style="stroke: #000000; stroke-width: 2.5;" width="2225" x="15" y="168.2861"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="33.75" y="188.1586">refresh</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="231.8936" y2="231.8936"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="231.8936" y2="248.1436"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="248.1436" y2="248.1436"/><polygon fill="#A80036" points="534.375,243.1436,521.875,248.1436,534.375,253.1436,529.375,248.1436" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="192.5" x="529.375" y="225.8231">obtainFreshBeanFactory();</text><path d="M202.5,199.2291 L202.5,255.4791 L508.75,255.4791 L508.75,211.7291 L496.25,199.2291 L202.5,199.2291 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,199.2291 L496.25,211.7291 L508.75,211.7291 L496.25,199.2291 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="275" x="210" y="224.1016">生成 ConfigurableListableBeanFactory</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="65" x="210" y="246.2946">IOC 容器</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="297.0581" y2="297.0581"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="297.0581" y2="313.3081"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="313.3081" y2="313.3081"/><polygon fill="#A80036" points="534.375,308.3081,521.875,313.3081,534.375,318.3081,529.375,313.3081" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="251.25" x="529.375" y="290.9875">prepareBeanFactory(beanFactory);</text><path d="M230,332.0581 L448.75,332.0581 L448.75,343.3081 L436.25,355.8081 L230,355.8081 L230,332.0581 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="341.2939" style="stroke: #000000; stroke-width: 2.5;" width="535" x="230" y="332.0581"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162.5" x="248.75" y="351.9305">prepareBeanFactory</text><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="520.625" x2="573.125" y1="386.4441" y2="386.4441"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="573.125" x2="573.125" y1="386.4441" y2="402.6941"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="521.875" x2="573.125" y1="402.6941" y2="402.6941"/><polygon fill="#A80036" points="534.375,397.6941,521.875,402.6941,534.375,407.6941,529.375,402.6941" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="150" x="529.375" y="380.3735">setBeanClassLoader</text><path d="M355,364.8761 L355,398.6261 L508.75,398.6261 L508.75,377.3761 L496.25,364.8761 L355,364.8761 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,364.8761 L496.25,377.3761 L508.75,377.3761 L496.25,364.8761 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="127.5" x="362.5" y="389.7485">bean classLoader</text><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="520.625" x2="573.125" y1="442.3871" y2="442.3871"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="573.125" x2="573.125" y1="442.3871" y2="458.6371"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="521.875" x2="573.125" y1="458.6371" y2="458.6371"/><polygon fill="#A80036" points="534.375,453.6371,521.875,458.6371,534.375,463.6371,529.375,458.6371" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="195" x="529.375" y="436.3165">ignoreDependencyInterface</text><path d="M370,420.8191 L370,454.5691 L508.75,454.5691 L508.75,433.3191 L496.25,420.8191 L370,420.8191 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,420.8191 L496.25,433.3191 L508.75,433.3191 L496.25,420.8191 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="112.5" x="377.5" y="445.6915">aware 回调相关</text><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="520.625" x2="573.125" y1="507.5516" y2="507.5516"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="573.125" x2="573.125" y1="507.5516" y2="523.8016"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="521.875" x2="573.125" y1="523.8016" y2="523.8016"/><polygon fill="#A80036" points="534.375,518.8016,521.875,523.8016,534.375,528.8016,529.375,523.8016" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="221.25" x="529.375" y="501.481">registerResolvableDependency</text><path d="M242.5,474.8871 L242.5,531.1371 L508.75,531.1371 L508.75,487.3871 L496.25,474.8871 L242.5,474.8871 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,474.8871 L496.25,487.3871 L508.75,487.3871 L496.25,474.8871 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="240" x="250" y="499.7595">BeanFactory、applicationcontext</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="211.25" x="255" y="521.9525">等的注入，只能用于依赖注入</text><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="520.625" x2="573.125" y1="572.7161" y2="572.7161"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="573.125" x2="573.125" y1="572.7161" y2="588.9661"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="521.875" x2="573.125" y1="588.9661" y2="588.9661"/><polygon fill="#A80036" points="534.375,583.9661,521.875,588.9661,534.375,593.9661,529.375,588.9661" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="171.25" x="529.375" y="566.6455">addBeanPostProcessor</text><path d="M337.5,551.1481 L337.5,584.8981 L508.75,584.8981 L508.75,563.6481 L496.25,551.1481 L337.5,551.1481 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,551.1481 L496.25,563.6481 L508.75,563.6481 L496.25,551.1481 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="145" x="345" y="576.0205">添加 Bean 的处理器</text><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="520.625" x2="573.125" y1="637.8806" y2="637.8806"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="573.125" x2="573.125" y1="637.8806" y2="654.1306"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="521.875" x2="573.125" y1="654.1306" y2="654.1306"/><polygon fill="#A80036" points="534.375,649.1306,521.875,654.1306,534.375,659.1306,529.375,654.1306" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="121.25" x="529.375" y="631.81">registerSingleton</text><path d="M321.25,605.2161 L321.25,661.4661 L508.75,661.4661 L508.75,617.7161 L496.25,605.2161 L321.25,605.2161 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,605.2161 L496.25,617.7161 L508.75,617.7161 L496.25,605.2161 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="161.25" x="328.75" y="630.0885">注册 一些单例的 Bean</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="86.25" x="333.75" y="652.2815">environment</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="711.795" y2="711.795"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="711.795" y2="728.045"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="728.045" y2="728.045"/><polygon fill="#A80036" points="534.375,723.045,521.875,728.045,534.375,733.045,529.375,728.045" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="288.75" x="529.375" y="705.7245">postProcessBeanFactory(beanFactory);</text><path d="M266.25,690.2271 L266.25,723.9771 L508.75,723.9771 L508.75,702.7271 L496.25,690.2271 L266.25,690.2271 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,690.2271 L496.25,702.7271 L508.75,702.7271 L496.25,690.2271 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="216.25" x="273.75" y="715.0995">添加 BeanFactory 的后置处理</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="767.738" y2="767.738"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="767.738" y2="783.988"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="783.988" y2="783.988"/><polygon fill="#A80036" points="534.375,778.988,521.875,783.988,534.375,788.988,529.375,783.988" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="358.75" x="529.375" y="761.6675">invokeBeanFactoryPostProcessors(beanFactory);</text><path d="M255,746.17 L255,779.92 L508.75,779.92 L508.75,758.67 L496.25,746.17 L255,746.17 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,746.17 L496.25,758.67 L508.75,758.67 L496.25,746.17 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="227.5" x="262.5" y="771.0425">BeanFactory 的后置处理的回调</text><path d="M391.25,802.738 L718.75,802.738 L718.75,813.988 L706.25,826.488 L391.25,826.488 L391.25,802.738 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="160.022" style="stroke: #000000; stroke-width: 2.5;" width="1000" x="391.25" y="802.738"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271.25" x="410" y="822.6105">invokeBeanFactoryPostProcessors</text><polygon fill="#A80036" points="881.875,852.124,894.375,857.124,881.875,862.124,886.875,857.124" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="889.375" y1="857.124" y2="857.124"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="255" x="529.375" y="851.0535">postProcessBeanDefinitionRegistry</text><polygon fill="#A80036" points="1205,891.817,1217.5,896.817,1205,901.817,1210,896.817" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="896.875" x2="1212.5" y1="896.817" y2="896.817"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="265" x="905.625" y="890.7465">postProcessBeanDefinitionRegistry()</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="896.875" x2="949.375" y1="936.51" y2="936.51"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="949.375" x2="949.375" y1="936.51" y2="952.76"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="898.125" x2="949.375" y1="952.76" y2="952.76"/><polygon fill="#A80036" points="910.625,947.76,898.125,952.76,910.625,957.76,905.625,952.76" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="143.75" x="905.625" y="930.4395">sortPostProcessors</text><path d="M695,914.942 L695,948.692 L885,948.692 L885,927.442 L872.5,914.942 L695,914.942 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M872.5,914.942 L872.5,927.442 L885,927.442 L872.5,914.942 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="163.75" x="702.5" y="939.8145">把 postProcessor 拍序</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1001.203" y2="1001.203"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1001.203" y2="1017.453"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1017.453" y2="1017.453"/><polygon fill="#A80036" points="534.375,1012.453,521.875,1017.453,534.375,1022.453,529.375,1017.453" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="312.5" x="529.375" y="995.1324">registerBeanPostProcessors(beanFactory);</text><path d="M300,979.635 L300,1013.385 L508.75,1013.385 L508.75,992.135 L496.25,979.635 L300,979.635 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,979.635 L496.25,992.135 L508.75,992.135 L496.25,979.635 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="182.5" x="307.5" y="1004.5074">注册 BeanPostProcessor</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1057.146" y2="1057.146"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1057.146" y2="1073.396"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1073.396" y2="1073.396"/><polygon fill="#A80036" points="534.375,1068.396,521.875,1073.396,534.375,1078.396,529.375,1073.396" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="153.75" x="529.375" y="1051.0754">initMessageSource();</text><path d="M266.25,1035.578 L266.25,1069.328 L508.75,1069.328 L508.75,1048.078 L496.25,1035.578 L266.25,1035.578 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1035.578 L496.25,1048.078 L508.75,1048.078 L496.25,1035.578 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="216.25" x="273.75" y="1060.4504">初始化信息源，和国际化相关.</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1113.089" y2="1113.089"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1113.089" y2="1129.339"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1129.339" y2="1129.339"/><polygon fill="#A80036" points="534.375,1124.339,521.875,1129.339,534.375,1134.339,529.375,1129.339" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="236.25" x="529.375" y="1107.0184">initApplicationEventMulticaster();</text><path d="M315,1091.521 L315,1125.271 L508.75,1125.271 L508.75,1104.021 L496.25,1091.521 L315,1091.521 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1091.521 L496.25,1104.021 L508.75,1104.021 L496.25,1091.521 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="167.5" x="322.5" y="1116.3934">初始化容器事件传播器.</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1169.032" y2="1169.032"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1169.032" y2="1185.282"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1185.282" y2="1185.282"/><polygon fill="#A80036" points="534.375,1180.282,521.875,1185.282,534.375,1190.282,529.375,1185.282" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="87.5" x="529.375" y="1162.9614">onRefresh();</text><path d="M217.5,1147.464 L217.5,1181.214 L508.75,1181.214 L508.75,1159.964 L496.25,1147.464 L217.5,1147.464 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1147.464 L496.25,1159.964 L508.75,1159.964 L496.25,1147.464 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="265" x="225" y="1172.3364">调用子类的某些特殊Bean初始化方法</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1224.975" y2="1224.975"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1224.975" y2="1241.225"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1241.225" y2="1241.225"/><polygon fill="#A80036" points="534.375,1236.225,521.875,1241.225,534.375,1246.225,529.375,1241.225" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="135" x="529.375" y="1218.9044">registerListeners();</text><path d="M266.25,1203.407 L266.25,1237.157 L508.75,1237.157 L508.75,1215.907 L496.25,1203.407 L266.25,1203.407 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1203.407 L496.25,1215.907 L508.75,1215.907 L496.25,1203.407 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="216.25" x="273.75" y="1228.2794">为事件传播器注册事件监听器.</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1280.918" y2="1280.918"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1280.918" y2="1297.168"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1297.168" y2="1297.168"/><polygon fill="#A80036" points="534.375,1292.168,521.875,1297.168,534.375,1302.168,529.375,1297.168" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="320" x="529.375" y="1274.8474">finishBeanFactoryInitialization(beanFactory);</text><path d="M57.5,1315.918 L461.25,1315.918 L461.25,1349.668 L448.75,1362.168 L57.5,1362.168 L57.5,1315.918 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="342.2369" style="stroke: #000000; stroke-width: 2.5;" width="2170" x="57.5" y="1315.918"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="241.25" x="76.25" y="1335.7904">finishBeanFactoryInitialization</text><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="347.5" x="76.25" y="1357.9834">对配置了lazy-init属性的Bean进行预实例化处理</text><polygon fill="#A80036" points="1519.375,1393.7469,1531.875,1398.7469,1519.375,1403.7469,1524.375,1398.7469" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="1526.875" y1="1398.7469" y2="1398.7469"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="152.5" x="529.375" y="1392.6764">freezeConfiguration();</text><path d="M70,1369.054 L70,1402.804 L508.75,1402.804 L508.75,1381.554 L496.25,1369.054 L70,1369.054 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1369.054 L496.25,1381.554 L508.75,1381.554 L496.25,1369.054 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="412.5" x="77.5" y="1393.9264">缓存容器中所有注册的BeanDefinition元数据，以防被修改</text><polygon fill="#A80036" points="1519.375,1445.9399,1531.875,1450.9399,1519.375,1455.9399,1524.375,1450.9399" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="1526.875" y1="1450.9399" y2="1450.9399"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="188.75" x="529.375" y="1444.8694">preInstantiateSingletons();</text><path d="M80,1421.2469 L80,1454.9969 L508.75,1454.9969 L508.75,1433.7469 L496.25,1421.2469 L80,1421.2469 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1421.2469 L496.25,1433.7469 L508.75,1433.7469 L496.25,1421.2469 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="402.5" x="87.5" y="1446.1194">对配置了lazy-init属性的单态模式Bean进行预实例化处理</text><path d="M1278.75,1475.9399 L1747.5,1475.9399 L1747.5,1509.6899 L1735,1522.1899 L1278.75,1522.1899 L1278.75,1475.9399 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.25;"/><rect fill="none" height="173.465" style="stroke: #000000; stroke-width: 2.5;" width="936.25" x="1278.75" y="1475.9399"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202.5" x="1297.5" y="1495.8124">preInstantiateSingletons()</text><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="412.5" x="1297.5" y="1518.0054">对配置了lazy-init属性的单态模式Bean进行预实例化处理</text><polygon fill="#A80036" points="1795.625,1564.8654,1808.125,1569.8654,1795.625,1574.8654,1800.625,1569.8654" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25; stroke-dasharray: 2.0,2.0;" x1="1534.375" x2="1803.125" y1="1569.8654" y2="1569.8654"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="188.75" x="1543.125" y="1563.7949">preInstantiateSingletons();</text><path d="M1291.25,1529.0759 L1291.25,1585.3259 L1522.5,1585.3259 L1522.5,1541.5759 L1510,1529.0759 L1291.25,1529.0759 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M1510,1529.0759 L1510,1541.5759 L1522.5,1541.5759 L1510,1529.0759 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="195" x="1298.75" y="1553.9484">当工厂初始化完成的时候，</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="200" x="1303.75" y="1576.1414">初始化所有剩余的单例Bean</text><polygon fill="#A80036" points="2058.125,1628.1549,2070.625,1633.1549,2058.125,1638.1549,2063.125,1633.1549" style="stroke: #A80036; stroke-width: 1.25;"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="1810.625" x2="2065.625" y1="1633.1549" y2="1633.1549"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="90" x="1819.375" y="1627.0844">getSingleton</text><path d="M1675,1603.4619 L1675,1637.2119 L1798.75,1637.2119 L1798.75,1615.9619 L1786.25,1603.4619 L1675,1603.4619 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M1786.25,1603.4619 L1786.25,1615.9619 L1798.75,1615.9619 L1786.25,1603.4619 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="97.5" x="1682.5" y="1628.3344">获取单例对象</text><line style="stroke: #A80036; stroke-width: 1.25;" x1="520.625" x2="573.125" y1="1696.5979" y2="1696.5979"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="573.125" x2="573.125" y1="1696.5979" y2="1712.8479"/><line style="stroke: #A80036; stroke-width: 1.25;" x1="521.875" x2="573.125" y1="1712.8479" y2="1712.8479"/><polygon fill="#A80036" points="534.375,1707.8479,521.875,1712.8479,534.375,1717.8479,529.375,1712.8479" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="107.5" x="529.375" y="1690.5273">finishRefresh();</text><path d="M27.5,1675.0299 L27.5,1708.7799 L508.75,1708.7799 L508.75,1687.5299 L496.25,1675.0299 L27.5,1675.0299 " fill="#FBFB77" filter="url(#f17o6wqsk5zjw5)" style="stroke: #A80036; stroke-width: 1.25;"/><path d="M496.25,1675.0299 L496.25,1687.5299 L508.75,1687.5299 L496.25,1675.0299 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacingAndGlyphs" textLength="455" x="35" y="1699.9023">初始化容器的生命周期事件处理器，并发布容器的生命周期事件</text><!--MD5=[23bf9e9bd1524f8d1c662e555bdea195]
@startuml


AnnotationConfigApplicationContext -> AbstractApplicationContext: #refresh
AbstractApplicationContext -> AbstractApplicationContext: #refresh
group refresh
AbstractApplicationContext -> AbstractApplicationContext: obtainFreshBeanFactory();
note left: 生成 ConfigurableListableBeanFactory \nIOC 容器
AbstractApplicationContext -> AbstractApplicationContext: prepareBeanFactory(beanFactory);
group prepareBeanFactory
AbstractApplicationContext - -> AbstractApplicationContext: setBeanClassLoader
note left: bean classLoader
AbstractApplicationContext - -> AbstractApplicationContext: ignoreDependencyInterface
note left: aware 回调相关
AbstractApplicationContext - -> AbstractApplicationContext: registerResolvableDependency
note left: BeanFactory、applicationcontext\n 等的注入，只能用于依赖注入
AbstractApplicationContext - -> AbstractApplicationContext: addBeanPostProcessor
note left: 添加 Bean 的处理器
AbstractApplicationContext - -> AbstractApplicationContext: registerSingleton
note left: 注册 一些单例的 Bean\n environment
end

AbstractApplicationContext -> AbstractApplicationContext: postProcessBeanFactory(beanFactory);
note left: 添加 BeanFactory 的后置处理
AbstractApplicationContext -> AbstractApplicationContext: invokeBeanFactoryPostProcessors(beanFactory);
note left: BeanFactory 的后置处理的回调

group invokeBeanFactoryPostProcessors
AbstractApplicationContext -> PostProcessorRegistrationDelegate: postProcessBeanDefinitionRegistry
PostProcessorRegistrationDelegate -> BeanDefinitionRegistryPostProcessor :postProcessBeanDefinitionRegistry()

PostProcessorRegistrationDelegate -> PostProcessorRegistrationDelegate : sortPostProcessors
note left: 把 postProcessor 拍序


end


AbstractApplicationContext -> AbstractApplicationContext: registerBeanPostProcessors(beanFactory);
note left: 注册 BeanPostProcessor
AbstractApplicationContext -> AbstractApplicationContext: initMessageSource();
note left: 初始化信息源，和国际化相关.
AbstractApplicationContext -> AbstractApplicationContext: initApplicationEventMulticaster();
note left: 初始化容器事件传播器.
AbstractApplicationContext -> AbstractApplicationContext: onRefresh();
note left: 调用子类的某些特殊Bean初始化方法
AbstractApplicationContext -> AbstractApplicationContext: registerListeners();
note left: 为事件传播器注册事件监听器.
AbstractApplicationContext -> AbstractApplicationContext: finishBeanFactoryInitialization(beanFactory);

group finishBeanFactoryInitialization \n对配置了lazy-init属性的Bean进行预实例化处理
AbstractApplicationContext -> ConfigurableListableBeanFactory: freezeConfiguration();
note left: 缓存容器中所有注册的BeanDefinition元数据，以防被修改
AbstractApplicationContext ->  ConfigurableListableBeanFactory : preInstantiateSingletons();
note left: 对配置了lazy-init属性的单态模式Bean进行预实例化处理

group preInstantiateSingletons()  \n对配置了lazy-init属性的单态模式Bean进行预实例化处理
ConfigurableListableBeanFactory - -> DefaultListableBeanFactory: preInstantiateSingletons();
note left: 当工厂初始化完成的时候，\n 初始化所有剩余的单例Bean
DefaultListableBeanFactory -> DefaultSingletonBeanRegistry: getSingleton
note left: 获取单例对象

end

end



AbstractApplicationContext -> AbstractApplicationContext: finishRefresh();
note left: 初始化容器的生命周期事件处理器，并发布容器的生命周期事件
end

@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 CST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b520.11
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>