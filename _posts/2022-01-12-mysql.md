---
layout: page
---

*  目录
{:toc}
## mysql

#### 整体分析

![image-20220216111041686](../images/image-20220216111041686.png)



```
服务层：
1 功能维度：
		函数，存储过程 触发器 视图
2 模块划分 
		管理连接 权限验证  。解决长连接内存涨得很快，1 定期断开 2  >=5.7,可以使用mysql_reset_connection，重联，但不需要鉴权
		语法 词法分析
		查询缓存 不推荐使用，表中有更新，所有缓存失效。8.0版本已删除
		优化  执行计划生成 索引选择 
		执行 操作引擎 
		
引擎层 提供数据读写的接口
```

#### 数据库自增主键

#### 数据结构

####  数据库的特性，隔离级别及其实现

```
特性  原子性 持久性 隔离性 一致性

隔离界别  问题         如何解决
读未提交  脏读			   
读提交    不可重复读   一致性视图(sql的开始即创建) 
可重复读	 幻读				间隙锁+一致性视图(事务的开始即创建)
串行化		  无

一致性视图的实现基于快照 MVCC 
快照 :对整库的事务id生成一个快照
MVCC多版本控制，多版本的数据会根据事务对应
事务回滚 ：mysql 通过undo log 实现回滚
```

#### 日志 binlog redo log

#### MYSQL主从复制

```
主库会生成一个log dump 线程,用来给从库I/O 线程传Binlog 数据。 从库的I/O 线程会去请求主库的Binlog，并将得到的Binlog 写到本地的relay log (中继日志)文件中。 SQL 线程,会读取relay log 文件中的日志，并解析成SQL 语句逐一执行。
```



#### 锁

#### 索引

#### order by原理

#### count(*)原理





