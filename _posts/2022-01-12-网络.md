---
layout: page
---

# Tcp/IP协议卷1



## 14 TCP超时和重传

重传

```
1 基于时间 --超时重传RTO
2 基于确认信息的构成 
第二种比第一种效率更高
```

基于时间重传

```
1 tcp会在发送时设置一个计时器，计时器超时还未收到数据确认则超市。--会引发超时/或计时器重传。计时器超市成为重传超时RTO
```

快速重传

```
引发快速重传，1 TCP累计确认没有返回新的ACK 2 当返回ACK的确认信息SACK 表明出现失序的报文段。
```

### TCP超时重传逻辑控制值

tcp的2个值决定超时和重传(可在系统或程序中配置)（时间/次数）



### 时钟粒度和RTO边界

```
TCP时钟一个‘滴答’的时间长度称为粒度，通常500ms（linx 是1ms）
```



### 与tcp重传相关攻击

```
低速DoS [kk03] 预防方式-随机选择RTO

```



#### 网络分层协议

```
应用层 DHCP http HTTPS RMTP P2P DNS GTP RPC
传输层 TCP UDP
网络层 ICMP IP OSPF BGP IPSec GRE
链路层 ARP VLAN STP
物理层 网络跳线
```



#### TCP协议

```
报文
报文结构     设计目的
源端口/目标端口
序号        解决乱序的问题
确认序号    是否重传
状态位      SYN是发起一个连接，ACK是回复，RST是重新连接，FIN是结束连接 连接维护
窗口        流量控制 拥塞控制

特点  面向连接 有状态 面向字节流 有拥塞控制 
```

#### UDP协议

```
源端口和目标端口
udp长度和校验和
数据

特点 无连接 无状态 面向数据报 无拥塞控制
应用场景 处理速度快，对丢包不敏感
```



#### ping

```
ping是基于ICMP协议工作的
```



#### http

```

```

